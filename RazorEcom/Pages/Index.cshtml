@page
@using System.Globalization
@model RazorEcom.Pages.IndexModel
@{
    ViewData["Title"] = "Home";
}
<link href="~/css/site.css" rel="stylesheet" />

<!-- Hero / Banner -->
<div class="position-relative w-100">
    <img src="/images/Banner_Home_Page.png" class="w-100" style="height:500px;object-fit:cover;"
        onerror="this.src='https://placehold.co/1920x500/212529/FFF?text=Banner+Error'" />
</div>
<!-- Categories -->
<!-- <div class="container py-5">
    <h2 class="fw-bold text mb-4">Danh mục</h2>
    <div class="row g-3">
@foreach (var category in Model.Categories)
{
                <div class="col-md-3">
                    <div class="card h-100 text-center p-3 rounded-4 shadow-sm bg-dark text-light border-secondary">
                        <h5 class="fw-semibold text-warning">@category.Name</h5>
                        <p class="text-muted small">@category.Description</p>
                        <a asp-page="/Products/Index" asp-route-categoryId="@category.Id" class="btn btn-outline-warning rounded-pill mt-auto">
                            Xem sản phẩm
                        </a>
                    </div>
                </div>
}
    </div>
</div> -->
<!-- Featured Products -->
<div class="container py-5">
    <h2 class="fw-bold text mb-4">Sản phẩm nổi bật</h2>
    <div class="row g-4">
        @foreach (var variant in Model.FeaturedVariants)
        {
            <div class="col-md-3">
                <!-- THÊM class "product-card" -->
                <div class="card h-100 shadow-sm rounded-4 text product-card">

                    <!-- THÊM Lớp bọc cho ảnh và overlay -->
                    <div class="product-image-container">
                        <img src="@variant.ImageUrl" class="card-img-top" alt="@variant.Product.Name"
                            style="aspect-ratio: 1/1; object-fit: cover;"
                            onerror="this.src='https://placehold.co/600x600/212529/FFF?text=Image+Error'" />

                        <!-- THÊM Lớp Phủ (Overlay) -->
                        <div class="product-overlay">
                            <!-- Nút Yêu thích (placeholder) -->
                            <a href="#" class="btn btn-outline-light rounded-pill">
                                <i class="bi bi-heart"></i> Yêu thích
                            </a>

                            <form method="post" asp-page-handler="AddToCart" class="w-100">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="variantId" value="@variant.Id" />
                                <button type="submit" class="btn btn-warning w-100 rounded-pill fw-semibold">
                                    <i class="bi bi-cart-plus"></i> Thêm vào giỏ
                                </button>
                            </form>

                        </div>
                    </div>

                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">@variant.Product.Name</h5>
                        <p class="card-text text-warning fw-semibold">@variant.Price.ToString("C0",
                                                    System.Globalization.CultureInfo.GetCultureInfo("vi-VN"))</p>
                    <a asp-page="/Products/Detail" asp-route-id="@variant.ProductId"
                        class="btn btn-outline mt-auto rounded-pill">
                        Xem chi tiết
                    </a>
                </div>
            </div>
        </div>
                }
    </div>
</div>

<!-- Element Thông báo (Toast) -->
<div id="cart-toast" class="toast-notification" role="alert" aria-live="assertive" aria-atomic="true">
    <!-- Nội dung chèn bằng JS -->
</div>
<script src="~/js/home.js"></script>